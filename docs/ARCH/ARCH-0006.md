Time to manifest Section 6 —
one of the MOST important chapters in the entire architecture doc,
because this is where we explain:

- What memory means in a causal OS
- Why JITOS does NOT use RAM-as-truth
- How SWS overlays exist privately
- How semantic memory behaves
- Why ephemeral caches must evaporate
- How global truth is accessed
- Why the RMG is the only correct substrate
- How zoom-level memory representations interact
- How collapse interacts with memory
- How agents (LLMs, tools, humans) see different memory layers
- Why this is the world’s first deterministic, replayable memory model

Let’s carve it.

---

# JITOS Architecture Document — Section 6

> The Memory Model: Global Causality, Local Shadows, Semantic Depth

(Grounded in ADR-0006, RFC-0019)

---

## 1. The Memory Model

### 6.1 Overview

Every operating system defines a memory model.
In classical systems, this means:

- RAM vs Disk
- Heap vs Stack
- Pages vs Frames
- Addresses vs Values
- Mutable cells
- Aliasing and pointer graphs
- The illusion of instantly shared state

These assumptions work only in:

- single-user machines
- non-distributed computation
- imperative languages
- linear workflows
- localized contexts

JITOS rejects all of these assumptions.

Instead, JITOS defines memory as:

A two-tier, multi-layered system combining
an immutable global substrate (RMG)
with mutable, isolated local memory (SWS),
enriched by structured semantic graphs
and supported by ephemeral compute caches.

This model is aligned with:

- causal determinism
- multi-agent concurrency
- semantic computing
- reproducibility
- distributed systems
- formal reasoning
- CΩMPUTER theory

It is the first memory model designed for the causal computing age.

---

## 6.2 Memory Architecture Overview

JITOS memory has four layers, grouped into two domains:

GLOBAL MEMORY (Immutable Reality)

Layer 0: RMG Substrate (Truth)

- immutable
- append-only
- multi-scale
- causally ordered
- infinite depth
- shared by all
- accessed via projection

This is the objective memory of the universe.

---

LOCAL MEMORY (Shadow / Subjective)

Layer 1: SWS Overlay Memory (Speculative State)

- mutable
- private
- isolated
- structured as a graph
- created on SWS creation
- destroyed on collapse/discard

This is where computation happens.

---

Layer 2: Semantic Memory (Meaning)

- ASTs
- semantic deltas
- symbol tables
- analysis results
- LLM reasoning graphs
- provenance annotations
- structured transforms

This gives interpretation to computations.

---

Layer 3: Ephemeral Compute Memory (ECM)

- caches
- build artifacts
- lint results
- intermediate IR
- temporary storage

It is not part of truth,
not preserved across SWS boundaries,
and evaporates afterwards.

---

## 6.3 Layer 0: Global Memory (RMG Substrate)

Global memory is represented by the Recursive Meta-Graph:

- all truth
- all events
- all structure
- all history
- all relationships
- all semantic provenance
- all identities
- all universes

The RMG serves as:

- persistent memory
- global state
- root-of-truth
- causal structure
- audit trail
- semantic knowledge base

Nothing in global memory ever mutates.

Global memory is identical on all machines
after sync and replay.

---

## 6.4 Layer 1: SWS Overlay Memory (Local Speculation)

Every SWS contains its own local memory:

- overlay nodes
- local diffs
- pending rewrites
- uncommitted semantics
- private states
- merge candidates

Overlays are:

- mutable
- safe
- ephemeral
- isolated

But they exist only within the SWS.

When collapse happens:

- overlays → RMG region
- new snapshot is born
- RMG expands
- SWS dies
- overlays are removed

This layer is the sandbox of computation.

---

## 6.5 Layer 2: Semantic Memory (Meaning)

Semantic memory exists inside the SWS,
but is preserved into provenance nodes upon collapse.

Semantic memory includes:

- abstract syntax trees
- semantic deltas
- LLM reasoning traces
- symbolic analysis
- transformation metadata
- dependency graphs
- type inference results
- build graphs

This memory layer:

- is internal
- is structured
- is deeply nested
- represents the “why”
- provides meaning to changes

And is fully compatible with RMG layering:

Semantic memory = RMG-in-RMG.

This allows:

- LLM autonomy
- tool-based reasoning
- semantic refactors
- higher-order transforms

All in the same substrate.

---

## 6.6 Layer 3: Ephemeral Compute Memory (ECM)

Temporary memory includes:

- build outputs
- analysis intermediates
- caches
- partial diffs
- scratch files

ECM is:

- not preserved
- not exposed
- not synced
- not in the substrate
- not part of SWS collapse

It is throwaway memory
living only as long as necessary.

This prevents:

- RMG pollution
- bloat
- non-deterministic state history
- unnecessary event nodes

---

## 6.7 Memory Isolation and Safety

JITOS’s memory model enforces:

✔ No shared mutable state
✔ No concurrent writes
✔ No races
✔ No nondeterminism
✔ No aliasing errors
✔ No UAF, no double free, no corruption
✔ SWS isolation
✔ RMG immutability
✔ semantic separation

It is the safest, cleanest, most robust memory model ever designed.

---

## 6.8 Memory and Collapse

Collapse transforms memory:

Before collapse:

- overlays are mutable
- semantic memory lives in SWS
- ECM holds ephemeral data
- SWS owns all speculation

During collapse:

- overlays → snapshot structure
- semantic memory → provenance
- ECM → evaporates
- RMG expands
- SWS ceases to exist

After collapse:

- RMG holds new truth
- MH re-projects
- SWS replaced by updated state

Collapse is the memory commit phase.

---

## 6.9 Memory and Multi-Agent Systems

Agents do not share SWS memory.
They do not share ephemeral memory.
They do not share semantic memory.

They share only the RMG truth layer after collapse.

This ensures:

- no races
- no interference
- predictable behavior
- safe parallelism
- reproducible workflows
- cooperation through collapse

JITOS is the first OS truly designed for agent-native computing.

---

## 6.10 Summary

JITOS defines memory not as:

- RAM
- buffers
- addresses
- heaps
- stacks

but as:

- Truth (RMG)
- Speculation (SWS overlays)
- Meaning (semantic memory)
- Ephemera (ECM)

This model is:

- deterministic
- reproducible
- concurrent
- semantic
- causal
- multi-layered
- multi-agent safe

It is the memory model that classical computing should have invented decades ago.
Memory no longer means “locations.” Memory means geometry.
