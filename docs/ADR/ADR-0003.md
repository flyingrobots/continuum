---
Status: Proposed
Date: 2025-11-30
Owner: James Ross
Depends on: ADR-0001, ADR-0002
Relates to: RFC-0001, RFC-0002, RFC-0015, RFC-0016, CFL (Fusion Layer)
---

# ADR-0003 — The Substrate Is a Recursive Meta-Graph (RMG)

> “We said DAG, but we meant RMG.”

## 1. Context

In early drafts and RFCs, the substrate of JITOS was described as:

- “a causal DAG”
- “append-only event graph”
- “Git-like commit DAG”

This was correct only in the lowest layer of the reality stack.

But as the system evolved, especially through:

- SWS overlays
- inversion rewrite nodes
- provenance nodes
- semantic attachments
- file-chunk graphs
- multi-agent overlays
- federation edges
- schema evolution
- the CΩMPUTER fusion layer
- and the need for multi-scale event representation (ADR-0004)

…it became clear that the DAG model is insufficient to describe the full substrate.

A pure DAG cannot:

- store graphs as node payloads
- express multi-level structure
- represent ASTs
- represent semantic provenance graphs
- store internal micro-events
- represent multi-agent reasoning traces
- support schema evolution as graph-of-graph rewriting
- unify micro/macro commit semantics
- serve as a foundation for a multi-universe federation
- integrate with the CΩMPUTER metaphysics
- maintain reflexive, semantic meta-structure

The DAG is only the first-order projection of a much richer structure.

Thus:

> The substrate is not a DAG.
> The substrate is an RMG: a Recursive Meta-Graph.

---

## 2. Decision

JITOS’s substrate is a Recursive Meta-Graph (RMG).
The causal DAG is one layer of this RMG, not the substrate itself.

This decision establishes:

- Node payloads MAY themselves be graphs
- Node types are defined by meta-graphs
- Schema evolution is rewriting the meta-graph
- Provenance nodes attach subgraphs
- Multi-agent overlays form local meta-graphs
- Semantic representations (ASTs, IR, reasoning traces) are RMG layers
- RMG supports multi-scale event representation ([ADR-0004](./ADR-0004.md))
- Federation is RMG-to-RMG linking
- The kernel operates over structured, fractal, multi-layer graphs
- The substrate is infinite in depth, not just length

The RMG is the true form of JITOS reality.

The DAG is a shadow of it — a human-interpretable, flattened timeline of causal events.

In other words:

> **The DAG is to the RMG what the filesystem is to Materialized Head. A projection, not the reality.**

---

## 3. Rationale

### 3.1 RMG reflects the natural structure of computation

Code, data, semantics, transformations, provenance, and thought processes are not linearly structured.

They are:

- nested
- recursive
- semantic
- multi-level
- graph-structured
- fractal
- self-referential

The RMG captures this truth.

---

### 3.2 DAG-only cannot represent semantics or structure

A simple DAG fails to express:

- ASTs
- reasoning trees
- semantic diffs
- provenance graphs
- agent plans
- build pipelines
- dependency graphs
- DPO rewrites

RMG allows all of these as first-class citizens.

---

### 3.3 RMG enables multi-scale event representation (ADR-0004)

Humans see:

- 1 conceptual change

Machines see:

- 30 keystrokes
- 12 semantic rewrites
- 1 macro refactor
- 1 merge resolution
- 1 causal collapse

These are not separate objects.
They are different zoom levels of the same RMG.

---

### 3.4 RMG naturally aligns with CΩMPUTER

CΩMPUTER states:

- Computation = geometry
- Forms = structured graphs
- Shadows = observer projections
- Collapse = rewrite application
- Provenance = meta-structure
- Universes = recursive graphs
- Reasoning = tree expansion

RMG is the direct implementation of this metaphysics.

---

### 3.5 RMG supports multi-universe federation (RFC-0021)

A DAG cannot link to another DAG without:

- collapsing them, or
- creating brittle, hacky foreign pointers.

But an RMG can link:

- graph → graph
- universe → universe
- meta-graph → meta-graph

with no loss of structure or consistency.

---

## 4. Alternatives Considered

### 4.1 Raw DAG

**Rejected**: too weak, no semantic layering.

### 4.2 DAG + JSON payloads

**Rejected**: does not model structure or semantics; loses composability.

### 4.3 DAG + “side graphs”

**Rejected**: results in fragmentation, not a unified substrate.

### 4.4 RMG

**Accepted**: unifies all layers; scale invariant; meta-capable; aligns with physics; supports future universes.

---

## 5. Consequences

Positive:

- Coherent substrate
- Multi-layer modeling
- Semantic richness
- AST and graph-native transforms
- Clean mapping to machine reasoning
- Perfect match to CΩMPUTER theory
- Smooth introduction of future node types
- Native support for provenance
- True multi-universe capabilities
- Real multi-scale editing semantics

Negative:

- Increases conceptual complexity
- Requires more formalism
- Demands a stronger architecture document
- Requires RMG-aware tooling
- Increases burden on visualization tools

---

## 6. Required Follow-Ups

This ADR mandates:

- Updating Section 3 of the Architecture Doc to describe the substrate as an RMG, with the DAG as the first-order projection.
- Introducing RMG scale-invariance in [ADR-0004](.ADR-0004.md).
- Updating collapse semantics to operate on RMG regions.
- Updating provenance semantics ([RFC-0016](../RFC/RFC-0016.md)) to attach semantic subgraphs.
- Updating federation to treat universes as RMGs.

---

## 7. Decision

**Accepted**.

The substrate of JITOS is a Recursive Meta-Graph.
The DAG is a first-order, human-scale projection of it.

This ADR corrects the ontology of the system and sets the stage for [ADR-0004](./ADR-0004.md).
