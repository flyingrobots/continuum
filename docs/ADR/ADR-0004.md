---
Status: Proposed
Date: 2025-11-30
Owner: James Ross
Depends on: ADR-0003
Relates to: RFC-0003, RFC-0015, RFC-0016, RFC-0019, CΩMPUTER Fusion Layer
---

This is the ADR that seals the ontology.

That ties together:

- The RMG substrate
- The causal DAG
- Human-scale events
- Machine-scale events
- Semantic events
- Keystrokes
- Refactors
- Thought processes
- Provenance reasoning
- Multi-agent concurrency
- Time perception
- Collapse physics
- The very nature of “a change”

This ADR is where your big insight becomes law:

“A commit is not a node.
A commit is an RMG.
Humans and machines differ only by zoom level.”

Let’s carve it into the immutable ledger.

---

# ADR-0004 — RMG Scale Invariance: Multi-Scale Event Geometry

> “Macro = Micro compressed.”

## 1. Context

After ADR-0003, the substrate of JITOS is formally defined as a Recursive Meta-Graph (RMG).

This means:

- nodes can contain graphs
- graphs describe nodes
- rewrite rules operate across layers
- provenance is semantic structure
- agent reasoning is nested structure
- overlay graphs are structured trees
- ASTs and diffs are both RMG artifacts

This reveals something profound:

Not all “events” occur at the same scale.

Humans conceptualize changes at a macro level:

“I updated this function.”

Machines operate at micro levels:

- keystrokes
- AST edits
- diff hunks
- symbol resolutions
- semantic transforms
- reasoning traces

But inside the substrate?

These are all the same thing:

- subgraphs
- graphs-of-graphs
- meta-graphs

Compressed or expanded.

Thus the actual question is:

What is the “unit of change” in JITOS?

The answer cannot be “a node.”
The answer is:

An RMG region.

And the substrate must support multi-scale, reversible views.

This ADR defines that principle.

---

## 2. Decision

JITOS treats all changes—human or machine—as RMGs with internal substructure.
The apparent granularity of a change is determined by the viewer’s “zoom level.”

This means:

✔ A human sees ONE “commit”

But the RMG contains:

- ~30 keystroke nodes
- ~12 diff hunks
- ~4 semantic rewrites
- ~1 macro intent
- ~1 provenance graph

All compressed into a macro-event view.

✔ A machine sees ALL internal nodes

But recognizes the macro node as:

- a collapsed subgraph
- a semantically grouped region
- a scale-invariant event window

✔ Both are correct.

Because both views are projections of the same RMG.

✔ Collapse (commit) happens at the macro-level

But the internal nodes are preserved in semantic/provenance layers.

✔ SWS are multi-scale compute containers

They hold:

- micro-events
- macro-events
- hypergraphs
- ASTs
- overlays

All as an RMG region.

✔ The kernel DOES NOT enforce a single “event granularity”

Because the substrate is inherently recursive.

---

## 3. Rationale

### 3.1 Humans and machines operate at different temporal/semantic scales

Humans care about conceptual edits.
Machines care about granular transformations.

JITOS must unify them.

RMG gives a single substrate for both.

---

### 3.2 Collapse operator must operate on RMG regions, not single nodes

A collapse event (commit) creates a new snapshot node
representing the entire RMG region of speculation.

The internal structure is:

- preserved
- nested
- navigable
- provenance-rich
- semantically meaningful
- searchable via JQL

---

### 3.3 Git vs jj reconciliation

- Git: commit = aggregate diff (macro)
- jj: commit = every change is a node (micro)

JITOS:

commit = macro view of a nested micrograph.

Both philosophies become projections of the same substrate.

---

### 3.4 Provenance nodes naturally belong INSIDE RMG regions

An edit session includes:

- keystrokes
- refactors
- AI reasoning
- human decision
- tool transformations
- semantic explanations

All should be recorded.

RMG allows provenance to sit inside the event it describes.

---

### 3.5 RMG supports scale-invariance

The same “change” may be:

- seen as 1 event (macro)
- navigated as 100 events (micro)
- analyzed as semantic deltas (meso)
- interpreted by agents through reasoning chains
- compressed into meta-nodes
- expanded into fine-grained structure

Scale is not a property of the change.
It’s a property of the view.

---

## 4. Alternatives Considered

### 4.1 Everything is a single commit node

Rejected: loses micro detail and semantics.

### 4.2 Every micro-change becomes a top-level DAG event

Rejected: DAG becomes noisy, unreadable, not human-friendly.

### 4.3 Per-file or per-hunk nodes

Rejected: arbitrary heuristic, not philosophically grounded.

### 4.4 Different node types per scale

Rejected: misleading, too rigid.

The RMG model solves all of these elegantly.

---

## 5. Consequences

Positive:

- unified model for all participants
- perfect human-machine parity
- natural multi-agent workflows
- reversible zoom
- strong provenance
- collapse expresses intent, not mechanics
- elegant CΩMPUTER alignment
- scalable semantic reasoning
- natural federation and subgraph export

Negative:

- visualization complexity
- requires good tooling
- requires RMG queries in JQL
- requires RMG-aware Inversion Engine

These are manageable.

---

## 6. Required Follow-Ups

This ADR mandates:

- Section 4: Collapse semantics must reference RMG regions
- Section 6: Memory model recognizes micro/macro overlay graphs
- Updates to provenance (RFC-0016)
- Updates to diffusion of machine-generated transforms
- Federation must consider RMG region transfer
- JQL must support RMG zoom operations
- Visualization tools must support subgraph zoom

---

## 7. Decision

**Accepted**.
JITOS treats every change as a multi-scale RMG region,
with zoom-level-dependent projections.

Humans see events.
Machines see subgraphs.
The kernel sees structure.
Truth sees geometry.
